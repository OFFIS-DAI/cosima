<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; cosima 0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial" href="Tutorial.html" />
    <link rel="prev" title="Overview" href="Overview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            cosima
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation-of-python-packages">Installation of python packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-and-configuration-of-omnet">Installation and configuration of OMNeT++</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation-of-protobuf">Installation of protobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optional-pytests">Optional: PyTests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optional-google-test-and-google-mock">Optional: Google-Test and Google-Mock</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-google-test">Installing Google Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#include-the-tests-and-execute-them">Include the Tests and execute them</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="Scenarios.html">Scenarios</a></li>
<li class="toctree-l1"><a class="reference internal" href="Synchronization.html">Synchronization of OMNeT++ and mosaik</a></li>
<li class="toctree-l1"><a class="reference internal" href="MessageTypes.html">Message Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="CommunicationSimulator.html">CommunicationSimulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="ICTController.html">ICTController</a></li>
<li class="toctree-l1"><a class="reference internal" href="Networks.html">OMNeT++ networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="MosaikScheduler.html">MosaikScheduler</a></li>
<li class="toctree-l1"><a class="reference internal" href="AgentApps.html">Agent Apps</a></li>
<li class="toctree-l1"><a class="reference internal" href="Privacy.html">Privacy Policies</a></li>
<li class="toctree-l1"><a class="reference internal" href="Legals.html">Legals</a></li>
<li class="toctree-l1"><a class="reference internal" href="Datenschutz.html">Datenschutz</a></li>
<li class="toctree-l1"><a class="reference internal" href="Impressum.html">Impressum</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cosima</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Installation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Installation.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h1>
<p>To use the project, an installation of mosaik (at least version 3.0), OMNeT++ and protobuf are required.</p>
<p>If you use Ubuntu:
You can use the <a class="reference internal" href="#install-requirements.sh"><span class="xref myst">Installation Shell Script</span></a> via</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chmod<span class="w"> </span>+x<span class="w"> </span>install-requirements.sh
sudo<span class="w"> </span>./install-requirements.sh
</pre></div>
</div>
<p>for the installation tasks.
Otherwise, follow the following instructions.</p>
<section id="installation-of-python-packages">
<h2>Installation of python packages<a class="headerlink" href="#installation-of-python-packages" title="Permalink to this heading"></a></h2>
<p>Use the package manager <a class="reference external" href="https://pip.pypa.io/en/stable/">pip</a> to install the requirements.txt file.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</pre></div>
</div>
</section>
<section id="installation-and-configuration-of-omnet">
<h2>Installation and configuration of OMNeT++<a class="headerlink" href="#installation-and-configuration-of-omnet" title="Permalink to this heading"></a></h2>
<p>In order to install OMNeT++ in version 5.6.2, go to their
<a class="reference external" href="https://github.com/omnetpp/omnetpp/releases/download/omnetpp-5.6.2/omnetpp-5.6.2-src-linux.tgz">website</a> and follow the
instructions for your operating system.
In case that you are using Ubuntu (which is recommended), you can also execute the following commands:</p>
<p><strong>Go to home directory</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>~
</pre></div>
</div>
<p><strong>Create working directory and enter directory</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir<span class="w"> </span>-p<span class="w"> </span>omnetpp
<span class="nb">cd</span><span class="w"> </span>omnetpp
</pre></div>
</div>
<p><strong>Fetch OMNeT++ source (in version 5.6.2)</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>https://github.com/omnetpp/omnetpp/releases/download/omnetpp-5.6.2/omnetpp-5.6.2-src-linux.tgz
tar<span class="w"> </span>-xf<span class="w"> </span>omnetpp-5.6.2-src-linux.tgz
</pre></div>
</div>
<p><strong>Export path</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/usr/omnetpp/omnetpp-5.6.2/bin
</pre></div>
</div>
<p><strong>Configure and compile</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>omnetpp-5.6.2
./configure<span class="w"> </span><span class="nv">PREFER_CLANG</span><span class="o">=</span>yes
make
</pre></div>
</div>
<p><strong>Installation and configuration of INET</strong><br />
Install INET 4.2.2 from the OMNeT++ website <a class="reference external" href="https://omnetpp.org/">OMNeT++ INET</a>.
The corresponding release can be found under this <a class="reference external" href="https://github.com/inet-framework/inet/releases/download/v4.2.2/inet-4.2.2-src.tgz">link</a>.</p>
<p>Again, under Ubuntu you can navigate to your preferred working directory and execute the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget<span class="w"> </span>https://github.com/inet-framework/inet/releases/download/v4.2.2/inet-4.2.2-src.tgz
tar<span class="w"> </span>-xzf<span class="w"> </span>inet-4.2.2-src.tgz
rm<span class="w"> </span>inet-4.2.2-src.tgz
mv<span class="w"> </span>inet4<span class="w"> </span>inet
<span class="nb">cd</span><span class="w"> </span>inet
make<span class="w"> </span>makefiles
</pre></div>
</div>
<p>After your installation, open the OMNeT++ IDE via</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>omnetpp
</pre></div>
</div>
<p>In the IDE, you can import the <a class="reference internal" href="#cosima_omnetpp_project"><span class="xref myst">OMNeT++ files</span></a> of this project as an Existing
Project under<br />
<em>File-&gt;Import-&gt;General-&gt;Existing Projects</em><br />
into Workspace.<br />
Then choose the INET installation directory as a project reference under<br />
<em>Project Properties -&gt; Project References</em><br />
in this project.</p>
<p>Now build your project:<br />
<em>Project-&gt;Build Project</em></p>
<p><strong>(Optional) if you want to use LTE networks: Install SimuLTE 1.2.0</strong>
Install <a class="reference external" href="https://github.com/inet-framework/simulte/releases/download/v1.2.0/simulte-1.2.0-src.tgz">SimuLTE in the correct version</a>
and set the SimuLTE installation directory under<br />
<em>Project Properties -&gt; Project References</em><br />
in this project and re-build your project.</p>
<p>After installing all libraries check (and maybe adjust) the Makefile of the project.
Under</p>
<p><em>Project Properties -&gt; OMNeT++ -&gt; MakeMake</em><br />
adjust the makemakefile of the source folder (“src:makemake”)</p>
<ul class="simple">
<li><p>under Target: set “Executable”</p></li>
<li><p>under Scope: set “Deep Compile”, “Recursive make”</p></li>
<li><p>under Compile: add path to INET installation and set “Add include Paths exported from referenced Projects”</p></li>
<li><p>under Link: set both ticks. User interface libraries to link with: “all”</p></li>
</ul>
<p>You should get a MakeMake option like</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>--deep<span class="w"> </span>-I<span class="s2">&quot;C:\Users\user\Omnet-Projekt\inet&quot;</span><span class="w"> </span>--meta:recurse<span class="w"> </span>--meta:use-exported-include-paths<span class="w"> </span>--meta:export-library<span class="w"> </span>--meta:use-exported-libs<span class="w"> </span>--meta:feature-ldflags
</pre></div>
</div>
</section>
<section id="installation-of-protobuf">
<h2>Installation of protobuf<a class="headerlink" href="#installation-of-protobuf" title="Permalink to this heading"></a></h2>
<p>Install the protobuf compiler version 3.6.1 (on Ubuntu) via</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>libprotobuf-dev<span class="w"> </span>protobuf-compiler<span class="w"> </span>
</pre></div>
</div>
<p>The used <a class="reference internal" href="#cosima_core/messages/message.proto"><span class="xref myst">protobuf message</span></a> is already compiled. If you want to compile the .proto file or another one
use</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>protoc<span class="w"> </span>cosima_core/messages/message.proto<span class="w"> </span>--cpp_out<span class="o">=</span>.<span class="w"> </span>--python_out<span class="o">=</span>.
</pre></div>
</div>
<p>The output are the classes <a class="reference internal" href="#cosima_core/messages/message_pb2.py"><span class="xref myst">message_pb2.py</span></a> for python and message.pb.cc and message.pb.h for C++. Put
the C++ files in the <a class="reference internal" href="#cosima_omnetpp_project"><span class="xref myst">OMNeT++ folder</span></a>.</p>
<p>Now the generated files can be used in python via</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>from<span class="w"> </span>message_pb2<span class="w"> </span>import<span class="w"> </span>InfoMessage
</pre></div>
</div>
<p>and in C++ via</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &quot;message.pb.h&quot;</span>
</pre></div>
</div>
<p>Now add the protobuf installation to your project in OMNeT++ under<br />
<em>Project Properties -&gt; OMNeT++ -&gt; MakeMake -&gt; Options -&gt; Link -&gt; more -&gt; additional objects to link with</em><br />
add “-lprotobuf”.</p>
</section>
<section id="optional-pytests">
<h2>Optional: PyTests<a class="headerlink" href="#optional-pytests" title="Permalink to this heading"></a></h2>
<p>To set up testing in python follow these steps:</p>
<ul class="simple">
<li><p>in PyCharm under Settings -&gt; Python Integrated Tools -&gt; Testing set the Default Test Runner to PyTest</p></li>
<li><p>tests can be found in the <a class="reference internal" href="#../../tests"><span class="xref myst">test folder</span></a>. The structure of the test folder should correspond to the structure of
the project</p></li>
<li><p>test files start with “test_”</p></li>
<li><p>to run a test execute either a single file or the folder</p></li>
</ul>
<p>For further information see <a class="reference external" href="https://semaphoreci.com/community/tutorials/testing-python-applications-with-pytest">info</a>.</p>
</section>
<section id="optional-google-test-and-google-mock">
<h2>Optional: Google-Test and Google-Mock<a class="headerlink" href="#optional-google-test-and-google-mock" title="Permalink to this heading"></a></h2>
<p>The process of testing is performed with the unit-testing Framework <a class="reference external" href="https://github.com/google/googletest/blob/main/googletest/README.md">Google Test</a> with Google Mock.
It is generally used to test different functionalities of the cosima project like the AgentApps, the MosaikScenarioManager or the Scheduler Module.
Because the tests do not include the functionalities of the Networks itself, there is no need to execute them, when implementing a new Network.
For this reason, the tests are excluded from being executed in OMNeT++ by default.</p>
<section id="installing-google-test">
<h3>Installing Google Test<a class="headerlink" href="#installing-google-test" title="Permalink to this heading"></a></h3>
<p>The following commands can be used to install the Google Test framework under a Linux distribution.
Google Test must be installed, to run any of the tests but is not necessary to execute the project itself.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/google/googletest.git<span class="w"> </span>-b<span class="w"> </span>release-1.11.0
<span class="nb">cd</span><span class="w"> </span>googletest
mkdir<span class="w"> </span>build
<span class="nb">cd</span><span class="w"> </span>build
cmake<span class="w"> </span>..
make
sudo<span class="w"> </span>make<span class="w"> </span>install<span class="w"> </span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>googletest<span class="w"> </span>
<span class="nb">cd</span><span class="w"> </span>/usr/src/googletest<span class="w">   </span>
sudo<span class="w"> </span>cmake<span class="w"> </span>CMakeLists.tx
sudo<span class="w"> </span>make
sudo<span class="w"> </span>make<span class="w"> </span>install
</pre></div>
</div>
</section>
<section id="include-the-tests-and-execute-them">
<h3>Include the Tests and execute them<a class="headerlink" href="#include-the-tests-and-execute-them" title="Permalink to this heading"></a></h3>
<p>Executing the tests is possible by doing the following steps…</p>
<ol class="arabic simple">
<li><p>Including the tests folder
To perform Tests for the cosima project first you have to include them in the OMNeT++ Framework.
To do so, right-click on the folder <a class="reference internal" href="#../../cosima_omnetpp_project/tests"><span class="xref myst">tests</span></a> and then go to Resource Configuration -&gt; Exclude from Build.
In the newly opened window you now can uncheck the boxes for the configuration, that you want to perform the tests on.
By default, both the configuration for the debug and release mode should be checked.</p></li>
</ol>
<p><img alt="excluding of folders" src="_images/exclude.PNG" /></p>
<ol class="arabic simple" start="2">
<li><p>Update dependencies
Next up we have to make sure, that the compiler uses the Google Test libraries, when executinmg the project.
Under the Project Properties of our cosima_omnetpp_project, we have to click on OMNeT++ -&gt; Makemake -&gt; Options -&gt; Link -&gt; Additional objects to link with.
Here you have to add the following dependencies (-lgmock -lgtest -lpthread).
Now all that is left, is to rebuild the project and then executing it. The Tests should now be performed with the rest of the project.</p></li>
</ol>
<p><img alt="updating dependencies" src="_images/makemake.PNG" /></p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Overview.html" class="btn btn-neutral float-left" title="Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Tutorial.html" class="btn btn-neutral float-right" title="Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, OFFIS.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>